require("regenerator-runtime/runtime"),require("core-js/stable");var e,t=(e=require("sweetalert2"))&&e.__esModule?e.default:e;const n=document.querySelector(".login_modal"),r=document.querySelector(".signup_modal"),o=document.querySelector(".overlay"),s=document.querySelector(".login_btn--close-modal"),i=document.querySelector(".signup_btn--close-modal"),a=document.querySelector(".open_login-modal"),l=document.querySelector(".open_signup-modal"),c=document.querySelector(".register_button"),u=document.querySelector(".fullname"),d=document.querySelector(".mobile"),m=document.querySelector(".user_name"),h=document.querySelector(".amount"),p=document.querySelector(".password"),v=document.querySelector(".bvn"),g=document.querySelector("#account_type"),y=document.querySelector(".id_type"),S=document.querySelector(".id_number"),_=document.querySelector(".bvn_labell"),f=document.querySelector(".id_type-span"),b=document.querySelector(".id_number-span");class q{constructor(e,t){this.btnSignupOpenModal=e,this.btnLoginOpenModal=t,this._openModal(this.btnLoginOpenModal,n),this._openModal(this.btnSignupOpenModal,r),this._closeModal(s,n),this._closeModal(i,r)}showModal(e=n){e.classList.remove("hidden"),o.classList.remove("hidden")}_openModal(e=a,t){e.addEventListener("click",(()=>{this.showModal(t)}))}hideModal(e=n){e.classList.add("hidden"),o.classList.add("hidden")}_closeModal(e,t){e.addEventListener("click",(()=>{this.hideModal(t)})),o.addEventListener("click",(()=>{this.hideModal(t)}))}}const T=new q(l,a);const L=new class{accounts=JSON.parse(localStorage.getItem("Users"))||[];#undefined;constructor(){this._generateBVN(),this._register()}_calcInterest(){let e=Date.now();return Number(e.toString().split("").slice(11,14).join(""))/10}_generateBVN(){let e=Date.now();return Number(e.toString().split("").slice(3,14).join(""))}_generateAccountNumber(){return this._generateBVN()-1111e6}timeStamp(){const e=Date.now();let t=new Date(e);const n=t.getMonth()+1,r=t.getDate(),o=t.getFullYear();let s;s=12===t.getHours()?t.getHours()+1:t.getHours()>12?t.getHours()-12:t.getHours();const i=t.getMinutes();let a;return a=String(t.getSeconds()).length>1?t.getSeconds():`0${t.getSeconds()}`,`${r}/${n}/${o}      ${s}:${i}:${a}`}_register(){let e;console.log(this.accounts.length),v.addEventListener("focus",(e=>{e.target.value=this._generateBVN()})),h.addEventListener("focus",(e=>{"Tier One"===this.#undefined&&(e.target.value=1e3),"Tier Two"===this.#undefined&&(e.target.value=5e3),"Tier Three"===this.#undefined&&(e.target.value=2e4),console.log(e.target)})),g.addEventListener("change",(e=>{let t=e.target.value;"Tier One"===t?(v.value="",v.style.display="none",_.style.display="none"):(v.style.display="block",_.style.display="block"),"Tier Three"===t?(f.classList.remove("display_none"),b.classList.remove("display_none")):(f.classList.add("display_none"),b.classList.add("display_none")),this.#undefined=t})),c.addEventListener("click",(n=>{n.preventDefault();let o,s,i,a=u.value,l=d.value,c=m.value,g=Number(h.value),_=p.value;if(o="Tier One"===this.#undefined?null:v.value,"Tier Three"===this.#undefined&&(s=y.value,i=S.value),"Tier One"===this.#undefined&&1e3!==g)return void t.fire({title:"Error",text:"Minimum amount for Tier One is 1000",icon:"error"});if("Tier Two"===this.#undefined&&5e3!==g)return void t.fire({title:"Error",text:"Minimum amount for Tier Two is 5000",icon:"error"});"Tier Three"===this.#undefined&&2e4!==g&&t.fire({title:"Error",text:"Minimum amount for Tier Three is 20000",icon:"error"});let f=this._calcInterest();const b=""!==a&&""!==l&&""!==c&&""!==g&&""!==_,q=()=>{e={owner:a,movements:[g],movementsDate:[this.timeStamp()],interestRate:f,pin:_,bvn:o,accountNumber:this._generateAccountNumber(),accType:this.#undefined,idenType:s,idenNumber:i,userName:c,mobile:l},this.setItem(e),u.value=d.value=m.value=h.value=p.value=v.value="",T.hideModal(r),t.fire({title:"Success",text:"Registration Successful, Kindly Login",icon:"success"}).then((e=>{e&&location.reload()}))};let L;this.accounts.length>0&&(L=this.accounts.map((e=>e.userName)).some((e=>m.value===e))),L?t.fire({title:"Error",text:"Username Alredy exist!",icon:"error"}):this.accounts.length<=0&&b||b?q():t.fire({title:"Error",text:"All fields are require",icon:"error"})}))}setItem(e){this.accounts.push(e),localStorage.setItem("Users",JSON.stringify(this.accounts))}},M=document.querySelector(".balance__value"),x=document.querySelector(".summary__value--in"),w=document.querySelector(".summary__value--out"),E=document.querySelector(".summary__value--interest"),N=(document.querySelector(".timer"),document.querySelector(".date")),$=document.querySelector(".movements");let O;L?.accounts&&(O=JSON.parse(localStorage.getItem("Users"))||[]);const C=[...O],D=new class{constructor(){this.calcDate()}appendMovement(e,t=!1){$.innerHTML="";let n;(t?e.movements.slice().sort(((e,t)=>e-t)):e.movements).map(((t,r)=>{const o=t>0?"credit":"debit";let s=e.movementsDate[r];n=document.createElement("div"),n.classList.add("movements__row");const i=document.createElement("div");i.classList.add("movements__type",`movements__type--${o}`),i.textContent=`${r+1} ${o}`;let a=document.createElement("div");a.classList.add("movements__date"),a.textContent=`${s}`;const l=document.createElement("div");l.classList.add("movements__value"),l.textContent=`${t}€`,n.appendChild(i),n.appendChild(a),n.appendChild(l),$.insertAdjacentElement("afterbegin",n)}))}balance(e){e.balance=e.movements.reduce(((e,t)=>e+t),0),M.textContent=`${e.balance}€`}calcSumary(e){const t=e.movements.filter((e=>e>0)).reduce(((e,t)=>e+t),0);x.textContent=`${t}€`;const n=e.movements.filter((e=>e<0)).reduce(((e,t)=>e+t),0);w.textContent=`${Math.abs(n)}€`;const r=e.movements.filter((e=>e>0)).map((t=>t*e.interestRate/100)).filter((e=>e>=1)).reduce(((e,t)=>e+t),0);E.textContent=`${r.toFixed(1)}€`}updateUI(e){this.appendMovement(e),this.balance(e),this.calcSumary(e)}calcDate(){const e=new Date;let t=`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`;N.textContent=t}},I=document.querySelector(".login__btn"),k=document.querySelector(".form__btn--transfer"),U=document.querySelector(".btn--sort"),W=document.querySelector(".open_login-modal"),A=document.querySelector(".open_signup-modal"),B=document.querySelector(".logout"),H=document.querySelector(".login__input--user"),P=document.querySelector(".login__input--pin"),j=document.querySelector(".form__input--to"),J=document.querySelector(".form__input--amount"),R=document.querySelector(".welcome"),V=(document.querySelector(".bvn_label"),document.querySelector(".acc_label")),F=document.querySelector(".acc-type_label"),Y=document.querySelector(".app"),K=new q(A,W);let z,G=!1;new class{#undefined=JSON.parse(localStorage.getItem("Users"))||[];constructor(e){this.accounts=e,this.userLogin(),this.userTransfer(),this.transactionSort(),this.logout()}userLogin(){I.addEventListener("click",(e=>{e.preventDefault(),z=this.#undefined.find((e=>e.userName===H.value))||[];z?.pin===P.value&&z?.userName==H.value?(Y.style.opacity=1,R.textContent=`Welcome here ${z.owner}`,R.classList.add("highlight"),V.textContent=` ACC: ${z.accountNumber}`,V.classList.remove("hidden"),V.style.paddingLeft="15px",F.textContent=`Type: ${z.accType}`,F.classList.remove("hidden"),F.style.paddingLeft="10px",H.value="",P.value="",P.blur,K.hideModal(),W.classList.add("hidden"),A.classList.add("hidden"),B.classList.remove("hidden"),D.updateUI(z)):t.fire("Warning","Wrong Log in details","error")}))}generateOTP(){let e=Date.now();return e=String(e).split("").slice(8,13).join(""),e}toast(e,n){t.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",t.stopTimer),e.addEventListener("mouseleave",t.resumeTimer)}}).fire({icon:e,title:n})}userTransfer(){k.addEventListener("click",(e=>{e.preventDefault();let n=this.generateOTP(),r=Number(J.value),o=j.value,s=this.#undefined.find((e=>String(e.accountNumber)===o));if(z.balance>=r&&o&&o!==String(z.accountNumber)&&r>0&&s){const e=s?.movements?.reduce?.(((e,t)=>e+t),0);this.#undefined.forEach((o=>{if(o.owner===z.owner){("Tier One"===s.accType&&e+r<=1e5||"Tier Two"===s.accType&&e+r<=1e6||"Tier Three"===s.accType&&e+r<=5e6)&&n?t.fire({title:"supply OTP",text:`input this OTP code (${n}) to conplete this transaction`,icon:"info",input:"text"}).then((e=>{if(e.isConfirmed&&e.value===n){const e=L.timeStamp();o.movementsDate.push(e),s.movementsDate.push(e),o.movements.push(-r),s.movements.push(r),localStorage.setItem("Users",JSON.stringify(this.#undefined)),D.updateUI(z),J.value="",j.value="",r.blur,this.toast("success","Transfer Successful")}else this.toast("error","Wrong OTP")})):t.fire({title:"Warning",text:"Maximum amount for the receiver exceeded",icon:"error"})}}))}else t.fire("Warning","Wrong Receiver info.","error")}))}transactionSort(){U.addEventListener("click",(e=>{e.preventDefault(),D.appendMovement(z.movements,!G),G=!G}))}logout(){B.addEventListener("click",(()=>{Y.style.opacity=0,B.classList.add("hidden"),W.classList.remove("hidden"),A.classList.remove("hidden"),location.reload()}))}}(C);
//# sourceMappingURL=script.js.map
